$DEST='Z:\SHARED2\SCCM\TARGET';
$c=0;

foreach($url in Get-Content .\input_urls.txt) {

$c=$c+1;
$filename=$(Split-path -leaf $url);
$td=Join-Path -Path $DEST -ChildPath $c;
$fullpath=Join-Path -Path $td -ChildPath $filename;


#echo $filename;
#echo $c;
#echo $td;
#echo $fullpath;

if(Test-Path "$td" -PathType Container){
echo "$td : Exists";
echo "Skipping $fullpath`n";
}else{
echo "$td : Does NOT Exist!";
mkdir "$td";
echo "Downloading: $url";
(New-Object System.Net.WebClient).DownloadFile($url, $fullpath)
}
  
}